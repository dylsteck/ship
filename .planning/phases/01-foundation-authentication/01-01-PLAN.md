---
phase: 01-foundation-authentication
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - pnpm-workspace.yaml
  - turbo.json
  - tsconfig.base.json
  - .gitignore
  - apps/web/package.json
  - apps/web/tsconfig.json
  - apps/web/next.config.ts
  - apps/web/tailwind.config.ts
  - apps/web/postcss.config.mjs
  - apps/web/app/layout.tsx
  - apps/web/app/globals.css
  - apps/api/package.json
  - apps/api/tsconfig.json
  - apps/api/wrangler.toml
  - apps/api/src/index.ts
  - packages/ui/package.json
  - packages/ui/tsconfig.json
  - packages/types/package.json
  - packages/types/tsconfig.json
  - packages/config/typescript/base.json
  - packages/config/typescript/nextjs.json
  - packages/config/typescript/worker.json
autonomous: true

must_haves:
  truths:
    - "Running `pnpm dev` from root starts both web and api apps"
    - "apps/web serves Next.js at localhost:3000"
    - "apps/api serves Cloudflare Worker locally"
    - "Shared packages are accessible via workspace protocol"
  artifacts:
    - path: "turbo.json"
      provides: "Turborepo task pipeline configuration"
      contains: "build"
    - path: "pnpm-workspace.yaml"
      provides: "Workspace package definitions"
      contains: "apps/*"
    - path: "apps/web/package.json"
      provides: "Next.js 15.2.3+ web app"
      contains: "next"
    - path: "apps/api/wrangler.toml"
      provides: "Cloudflare Worker configuration"
      contains: "main"
  key_links:
    - from: "apps/web/package.json"
      to: "@ship/ui"
      via: "workspace:* dependency"
      pattern: "@ship/ui.*workspace"
    - from: "turbo.json"
      to: "apps/*/package.json"
      via: "task pipeline"
      pattern: "dependsOn.*\\^build"
---

<objective>
Scaffold Turborepo monorepo with Next.js web app and Cloudflare Worker API

Purpose: Establish the foundational project structure that all subsequent plans build upon. This is the skeleton that enables parallel development of web and API features.

Output:
- Root workspace with Turborepo orchestration
- apps/web: Next.js 15.2.3+ with Tailwind v4 and shadcn/ui foundation
- apps/api: Cloudflare Worker with Hono framework
- packages/ui: Shared UI components package stub
- packages/types: Shared TypeScript types package stub
- packages/config: Shared tooling configurations
</objective>

<execution_context>
@/Users/dylansteck/.claude/get-shit-done/workflows/execute-plan.md
@/Users/dylansteck/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-authentication/01-CONTEXT.md
@.planning/phases/01-foundation-authentication/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create root workspace and Turborepo configuration</name>
  <files>
    package.json
    pnpm-workspace.yaml
    turbo.json
    tsconfig.base.json
    .gitignore
    packages/config/typescript/base.json
    packages/config/typescript/nextjs.json
    packages/config/typescript/worker.json
    packages/config/package.json
  </files>
  <action>
    Create fresh monorepo structure (the existing single Next.js app will be moved/replaced):

    1. Root package.json:
       - name: "ship"
       - version: "2.0.0"
       - private: true
       - packageManager: "pnpm@9.0.0"
       - scripts: { "dev": "turbo dev", "build": "turbo build", "lint": "turbo lint", "type-check": "turbo type-check" }
       - devDependencies: turbo@^2.3.0, prettier@^3.8.1, typescript@^5.9.3

    2. pnpm-workspace.yaml:
       ```yaml
       packages:
         - 'apps/*'
         - 'packages/*'
       ```

    3. turbo.json (as shown in research):
       - build task with ^build dependency, outputs [".next/**", "!.next/cache/**", "dist/**"]
       - lint task
       - dev task with cache: false, persistent: true
       - type-check task

    4. tsconfig.base.json at root extending packages/config/typescript/base.json

    5. packages/config/typescript/base.json: Strict TypeScript base config
    6. packages/config/typescript/nextjs.json: Next.js specific extends base
    7. packages/config/typescript/worker.json: Cloudflare Worker specific extends base
    8. packages/config/package.json: name "@ship/config", private true

    9. Update .gitignore to include:
       - node_modules
       - .next
       - .turbo
       - dist
       - .dev.vars
       - .wrangler

    IMPORTANT: Remove or archive existing root-level app/, components/, lib/ directories (the old single-app structure). The new structure uses apps/web/ for Next.js.
  </action>
  <verify>
    - `pnpm install` succeeds without errors
    - `turbo --version` shows 2.3.x
    - packages/config/typescript/*.json files exist
  </verify>
  <done>
    Root workspace configured with Turborepo, pnpm workspaces, and shared TypeScript configs
  </done>
</task>

<task type="auto">
  <name>Task 2: Create Next.js web app with Tailwind v4</name>
  <files>
    apps/web/package.json
    apps/web/tsconfig.json
    apps/web/next.config.ts
    apps/web/tailwind.config.ts
    apps/web/postcss.config.mjs
    apps/web/app/layout.tsx
    apps/web/app/page.tsx
    apps/web/app/globals.css
  </files>
  <action>
    Create apps/web as fresh Next.js 15.2.3+ app:

    1. apps/web/package.json:
       - name: "web"
       - dependencies: next@^15.2.3, react@^19.2.1, react-dom@^19.2.1
       - dependencies: @ship/ui (workspace:*), @ship/types (workspace:*)
       - devDependencies: @tailwindcss/postcss, tailwindcss@^4.1.0, typescript, @types/react, @types/node

    2. apps/web/tsconfig.json extending @ship/config/typescript/nextjs.json with paths for @/* alias

    3. apps/web/next.config.ts: Basic config, transpilePackages: ["@ship/ui"]

    4. apps/web/postcss.config.mjs:
       ```js
       export default {
         plugins: {
           "@tailwindcss/postcss": {},
         },
       }
       ```

    5. apps/web/tailwind.config.ts: Tailwind v4 config (minimal, CSS-first)

    6. apps/web/app/globals.css with Tailwind v4 @import and @theme directive for brand colors

    7. apps/web/app/layout.tsx: Basic RootLayout with html/body, globals.css import

    8. apps/web/app/page.tsx: Simple placeholder page (will be replaced by login page)

    DO NOT use tailwind.config.js (v3 style). Tailwind v4 uses CSS-first configuration via @theme directive in globals.css.
  </action>
  <verify>
    - `cd apps/web && pnpm dev` starts Next.js on localhost:3000
    - Tailwind classes work (test with a simple className="bg-blue-500")
    - No TypeScript errors
  </verify>
  <done>
    Next.js 15.2.3+ app running with Tailwind v4 CSS-first configuration
  </done>
</task>

<task type="auto">
  <name>Task 3: Create Cloudflare Worker API with Hono and shared packages</name>
  <files>
    apps/api/package.json
    apps/api/tsconfig.json
    apps/api/wrangler.toml
    apps/api/src/index.ts
    apps/api/src/routes/health.ts
    packages/ui/package.json
    packages/ui/tsconfig.json
    packages/ui/src/index.ts
    packages/types/package.json
    packages/types/tsconfig.json
    packages/types/src/index.ts
  </files>
  <action>
    Create apps/api as Cloudflare Worker with Hono:

    1. apps/api/package.json:
       - name: "api"
       - scripts: { "dev": "wrangler dev", "deploy": "wrangler deploy", "type-check": "tsc --noEmit" }
       - dependencies: hono@^4.0.0
       - devDependencies: wrangler@^3.0.0, @cloudflare/workers-types, typescript

    2. apps/api/tsconfig.json extending @ship/config/typescript/worker.json

    3. apps/api/wrangler.toml:
       ```toml
       name = "ship-api"
       main = "src/index.ts"
       compatibility_date = "2024-12-01"

       [[d1_databases]]
       binding = "DB"
       database_name = "ship-db"
       database_id = "local"  # Will be replaced with real ID
       ```

    4. apps/api/src/index.ts: Hono app with CORS, health route mounted

    5. apps/api/src/routes/health.ts: GET /health returning { status: "ok", timestamp }

    Create shared packages:

    6. packages/ui/package.json:
       - name: "@ship/ui"
       - exports: { "./*": "./src/*.tsx" }
       - peerDependencies: react@^19.0.0

    7. packages/ui/src/index.ts: Export placeholder (will add components later)

    8. packages/types/package.json:
       - name: "@ship/types"
       - exports: { "./*": "./src/*.ts" }

    9. packages/types/src/index.ts: Export placeholder

    Both packages with tsconfig.json extending base config.
  </action>
  <verify>
    - `cd apps/api && pnpm dev` starts Wrangler dev server
    - `curl http://localhost:8787/health` returns JSON with status: "ok"
    - `pnpm dev` from root starts both apps simultaneously
  </verify>
  <done>
    Cloudflare Worker API running with Hono, shared packages accessible
  </done>
</task>

</tasks>

<verification>
After all tasks complete:

1. From project root:
   - `pnpm install` completes without errors
   - `pnpm dev` starts both web (3000) and api (8787) apps

2. Web app:
   - http://localhost:3000 loads Next.js page
   - Tailwind styling works

3. API:
   - http://localhost:8787/health returns JSON response

4. Workspace packages:
   - apps/web can import from @ship/ui
   - apps/web can import from @ship/types
</verification>

<success_criteria>
- Turborepo monorepo structure established
- Next.js 15.2.3+ web app with Tailwind v4 running
- Cloudflare Worker API with Hono running
- Shared packages (@ship/ui, @ship/types) accessible
- `pnpm dev` runs full stack from root
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-authentication/01-01-SUMMARY.md`
</output>
