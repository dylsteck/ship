---
phase: 05-external-integrations
plan: 06
type: execute
wave: 3
depends_on: [05-01, 05-05]
files_modified:
  - apps/web/app/(app)/settings/page.tsx
  - apps/web/components/settings/connector-settings.tsx
  - apps/api/src/routes/connectors.ts
autonomous: true

must_haves:
  truths:
    - "User can enable or disable GitHub/Linear/Vercel connectors in settings"
    - "Connector state stored in user_preferences table"
    - "Connector settings UI shows connection status"
  artifacts:
    - path: "apps/web/components/settings/connector-settings.tsx"
      provides: "Connector management UI component"
      min_lines: 100
      exports: ["ConnectorSettings"]
    - path: "apps/api/src/routes/connectors.ts"
      provides: "Connector management API routes"
      min_lines: 80
      exports: ["GET /connectors", "POST /connectors/:name/enable", "POST /connectors/:name/disable"]
    - path: "apps/web/app/(app)/settings/page.tsx"
      provides: "Settings page with connector section"
      contains: "ConnectorSettings"
  key_links:
    - from: "apps/web/app/(app)/settings/page.tsx"
      to: "apps/web/components/settings/connector-settings.tsx"
      via: "import ConnectorSettings"
      pattern: "ConnectorSettings"
---

<objective>
Create connector management UI and API for enabling/disabling integrations.

Purpose: Give users control over which integrations are active, allowing them to enable/disable GitHub, Linear, and Vercel connectors independently.
Output: Connector settings UI and API for managing connector state
</objective>

<execution_context>
@/Users/dylansteck/.claude/get-shit-done/workflows/execute-plan.md
@/Users/dylansteck/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-external-integrations/05-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create connector management API</name>
  <files>apps/api/src/routes/connectors.ts</files>
  <action>
Create API routes for connector management.

Routes:
- GET /connectors - List all connectors with enabled status
- POST /connectors/:name/enable - Enable connector (github, linear, vercel)
- POST /connectors/:name/disable - Disable connector
- GET /connectors/:name/status - Get connector connection status

State storage:
- Store connector enabled state in user_preferences table
- Key format: 'connector.{name}.enabled' (e.g., 'connector.linear.enabled')
- Value: 'true' or 'false'

Connection status:
- Check if user has connected account (accounts table)
- Check if connector is enabled (user_preferences)
- Return: { connected: boolean, enabled: boolean }

Follow existing route patterns. Use Hono router.
</action>
  <verify>
Connector API routes exist. Enable/disable endpoints work. Status endpoint returns connection and enabled state. State stored in user_preferences.
</verify>
  <done>
Connector management API created. Connectors can be enabled/disabled via API.
</done>
</task>

<task type="auto">
  <name>Task 2: Create connector settings UI component</name>
  <files>apps/web/components/settings/connector-settings.tsx</files>
  <action>
Create connector settings component for managing integrations.

Component should:
- Display list of connectors (GitHub, Linear, Vercel)
- Show connection status (connected/disconnected)
- Show enabled/disabled toggle for each connector
- Display "Connect" button if account not connected
- Display "Disconnect" button if account connected
- Handle enable/disable API calls
- Show loading states during operations

UI design:
- Match Ramp design patterns (clean cards, subtle borders)
- Use toggle switches for enable/disable
- Show connection status badges
- Provide clear action buttons

Follow existing component patterns. Use 'use client' directive. Style with Tailwind.
</action>
  <verify>
Connector settings component exists. Displays connector list with status. Enable/disable toggles work. Connect/disconnect buttons function correctly.
</verify>
  <done>
Connector settings component created. Users can manage connector state via UI.
</done>
</task>

<task type="auto">
  <name>Task 3: Integrate connector settings into settings page</name>
  <files>apps/web/app/(app)/settings/page.tsx</files>
  <action>
Add connector settings section to existing settings page.

Integration:
- Import ConnectorSettings component
- Add "Integrations" section to settings page
- Display connector settings below model selection
- Fetch connector status on page load
- Handle connector state updates

Preserve existing settings page functionality. Add connector section as new section.

Follow existing settings page patterns. Reference existing settings-client.tsx structure.
</action>
  <verify>
Settings page includes connector settings section. ConnectorSettings component renders correctly. Connector state updates work.
</verify>
  <done>
Connector settings integrated into settings page. Users can manage connectors from settings.
</done>
</task>

</tasks>

<verification>
- Connector settings UI displays all connectors
- Users can enable/disable connectors
- Connection status shows correctly
- Connector state persists in user_preferences
</verification>

<success_criteria>
User can enable or disable GitHub/Linear/Vercel connectors in settings. Connector state persists and affects integration behavior.
</success_criteria>

<output>
After completion, create `.planning/phases/05-external-integrations/05-06-SUMMARY.md`
</output>
